{"version":3,"file":"react-ranger.development.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react'\n\nconst getBoundingClientRect = element => {\n  const rect = element.getBoundingClientRect()\n  return {\n    left: Math.ceil(rect.left),\n    width: Math.ceil(rect.width),\n  }\n}\n\nconst sortNumList = arr => [...arr].sort((a, b) => Number(a) - Number(b))\n\nconst useGetLatest = val => {\n  const ref = React.useRef(val)\n  ref.current = val\n  return React.useCallback(() => ref.current, [])\n}\n\nconst linearInterpolator = {\n  getPercentageForValue: (val, min, max) => {\n    return Math.max(0, Math.min(100, ((val - min) / (max - min)) * 100))\n  },\n  getValueForClientX: (clientX, trackDims, min, max) => {\n    const { left, width } = trackDims\n    const percentageValue = (clientX - left) / width\n    const value = (max - min) * percentageValue\n    return value + min\n  },\n}\n\nexport function useRanger({\n  interpolator = linearInterpolator,\n  tickSize = 10,\n  values,\n  min,\n  max,\n  ticks: controlledTicks,\n  steps,\n  onChange,\n  onDrag,\n  stepSize,\n}) {\n  const [activeHandleIndex, setActiveHandleIndex] = React.useState(null)\n  const [tempValues, setTempValues] = React.useState()\n\n  const getLatest = useGetLatest({\n    activeHandleIndex,\n    onChange,\n    onDrag,\n    values,\n    tempValues,\n  })\n\n  const trackElRef = React.useRef()\n\n  const getValueForClientX = React.useCallback(\n    clientX => {\n      const trackDims = getBoundingClientRect(trackElRef.current)\n      return interpolator.getValueForClientX(clientX, trackDims, min, max)\n    },\n    [interpolator, max, min]\n  )\n\n  const getNextStep = React.useCallback(\n    (val, direction) => {\n      if (steps) {\n        let currIndex = steps.indexOf(val)\n        let nextIndex = currIndex + direction\n        if (nextIndex >= 0 && nextIndex < steps.length) {\n          return steps[nextIndex]\n        } else {\n          return val\n        }\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          if (typeof stepSize === 'undefined') {\n            throw new Error(\n              'Warning: The option `stepSize` is expected in `useRanger`, but its value is `undefined`'\n            )\n          }\n        }\n        let nextVal = val + stepSize * direction\n        if (nextVal >= min && nextVal <= max) {\n          return nextVal\n        } else {\n          return val\n        }\n      }\n    },\n    [max, min, stepSize, steps]\n  )\n\n  const roundToStep = React.useCallback(\n    val => {\n      let left = min\n      let right = max\n      if (steps) {\n        steps.forEach(step => {\n          if (step <= val && step > left) {\n            left = step\n          }\n          if (step >= val && step < right) {\n            right = step\n          }\n        })\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          if (typeof stepSize === 'undefined') {\n            throw new Error(\n              'Warning: The option `stepSize` is expected in `useRanger`, but its value is `undefined`'\n            )\n          }\n        }\n        while (left < val && left + stepSize < val) {\n          left += stepSize\n        }\n\n        right = Math.min(left + stepSize, max)\n      }\n\n      if (val - left < right - val) {\n        return left\n      }\n      return right\n    },\n    [max, min, stepSize, steps]\n  )\n\n  const handleDrag = React.useCallback(\n    e => {\n      const { activeHandleIndex, onDrag } = getLatest()\n      const clientX =\n        e.type === 'touchmove' ? e.changedTouches[0].clientX : e.clientX\n      const newValue = getValueForClientX(clientX)\n      const newRoundedValue = roundToStep(newValue)\n\n      const newValues = [\n        ...values.slice(0, activeHandleIndex),\n        newRoundedValue,\n        ...values.slice(activeHandleIndex + 1),\n      ]\n\n      if (onDrag) {\n        onDrag(newValues)\n      } else {\n        setTempValues(newValues)\n      }\n    },\n    [getLatest, getValueForClientX, roundToStep, values]\n  )\n\n  const handleKeyDown = React.useCallback(\n    (e, i) => {\n      const { values, onChange = () => {} } = getLatest()\n      // Left Arrow || Right Arrow\n      if (e.keyCode === 37 || e.keyCode === 39) {\n        setActiveHandleIndex(i)\n        const direction = e.keyCode === 37 ? -1 : 1\n        const newValue = getNextStep(values[i], direction)\n        const newValues = [\n          ...values.slice(0, i),\n          newValue,\n          ...values.slice(i + 1),\n        ]\n        const sortedValues = sortNumList(newValues)\n        onChange(sortedValues)\n      }\n    },\n    [getLatest, getNextStep]\n  )\n\n  const handlePress = React.useCallback(\n    (e, i) => {\n      setActiveHandleIndex(i)\n\n      const handleRelease = e => {\n        const {\n          tempValues,\n          values,\n          onChange = () => {},\n          onDrag = () => {},\n        } = getLatest()\n\n        document.removeEventListener('mousemove', handleDrag)\n        document.removeEventListener('touchmove', handleDrag)\n        document.removeEventListener('mouseup', handleRelease)\n        document.removeEventListener('touchend', handleRelease)\n        const sortedValues = sortNumList(tempValues || values)\n        onChange(sortedValues)\n        onDrag(sortedValues)\n        setActiveHandleIndex(null)\n        setTempValues()\n      }\n\n      document.addEventListener('mousemove', handleDrag)\n      document.addEventListener('touchmove', handleDrag)\n      document.addEventListener('mouseup', handleRelease)\n      document.addEventListener('touchend', handleRelease)\n    },\n    [getLatest, handleDrag]\n  )\n\n  const getPercentageForValue = React.useCallback(\n    val => interpolator.getPercentageForValue(val, min, max),\n    [interpolator, max, min]\n  )\n\n  // Build the ticks\n  const ticks = React.useMemo(() => {\n    let ticks = controlledTicks || steps\n\n    if (!ticks) {\n      ticks = [min]\n      while (ticks[ticks.length - 1] < max - tickSize) {\n        ticks.push(ticks[ticks.length - 1] + tickSize)\n      }\n      ticks.push(max)\n    }\n\n    return ticks.map((value, i) => ({\n      value,\n      getTickProps: ({ key = i, style = {}, ...rest } = {}) => ({\n        key,\n        style: {\n          position: 'absolute',\n          width: 0,\n          left: `${getPercentageForValue(value)}%`,\n          transform: `translateX(-50%)`,\n          ...style,\n        },\n        ...rest,\n      }),\n    }))\n  }, [controlledTicks, getPercentageForValue, max, min, steps, tickSize])\n\n  const segments = React.useMemo(() => {\n    const sortedValues = sortNumList(tempValues || values)\n\n    return [...sortedValues, max].map((value, i) => ({\n      value,\n      getSegmentProps: ({ key = i, style = {}, ...rest } = {}) => {\n        const left = getPercentageForValue(\n          sortedValues[i - 1] ? sortedValues[i - 1] : min\n        )\n        const width = getPercentageForValue(value) - left\n        return {\n          key,\n          style: {\n            position: 'absolute',\n            left: `${left}%`,\n            width: `${width}%`,\n            ...style,\n          },\n          ...rest,\n        }\n      },\n    }))\n  }, [getPercentageForValue, max, min, tempValues, values])\n\n  const handles = React.useMemo(\n    () =>\n      (tempValues || values).map((value, i) => ({\n        value,\n        active: i === activeHandleIndex,\n        getHandleProps: ({\n          key = i,\n          ref,\n          innerRef = () => {},\n          onKeyDown,\n          onMouseDown,\n          onTouchStart,\n          style = {},\n          ...rest\n        } = {}) => ({\n          key,\n          onKeyDown: e => {\n            e.persist()\n            handleKeyDown(e, i)\n            if (onKeyDown) onKeyDown(e)\n          },\n          onMouseDown: e => {\n            e.persist()\n            handlePress(e, i)\n            if (onMouseDown) onMouseDown(e)\n          },\n          onTouchStart: e => {\n            e.persist()\n            handlePress(e, i)\n            if (onTouchStart) onTouchStart(e)\n          },\n          role: 'slider',\n          'aria-valuemin': min,\n          'aria-valuemax': max,\n          'aria-valuenow': value,\n          style: {\n            position: 'absolute',\n            top: '50%',\n            left: `${getPercentageForValue(value)}%`,\n            zIndex: i === activeHandleIndex ? '1' : '0',\n            transform: 'translate(-50%, -50%)',\n            ...style,\n          },\n          ...rest,\n        }),\n      })),\n    [\n      activeHandleIndex,\n      getPercentageForValue,\n      handleKeyDown,\n      handlePress,\n      min,\n      max,\n      tempValues,\n      values,\n    ]\n  )\n\n  const getTrackProps = ({ style = {}, ref, ...rest } = {}) => {\n    return {\n      ref: el => {\n        trackElRef.current = el\n        if (ref) {\n          if (typeof ref === 'function') {\n            ref(el)\n          } else {\n            ref.current = el\n          }\n        }\n      },\n      style: {\n        position: 'relative',\n        userSelect: 'none',\n        ...style,\n      },\n      ...rest,\n    }\n  }\n\n  return {\n    activeHandleIndex,\n    getTrackProps,\n    ticks,\n    segments,\n    handles,\n  }\n}\n"],"names":["getBoundingClientRect","element","rect","left","Math","ceil","width","sortNumList","arr","sort","a","b","Number","useGetLatest","val","ref","React","useRef","current","useCallback","linearInterpolator","getPercentageForValue","min","max","getValueForClientX","clientX","trackDims","percentageValue","value","useRanger","interpolator","tickSize","values","controlledTicks","ticks","steps","onChange","onDrag","stepSize","useState","activeHandleIndex","setActiveHandleIndex","tempValues","setTempValues","getLatest","trackElRef","getNextStep","direction","currIndex","indexOf","nextIndex","length","process","env","NODE_ENV","Error","nextVal","roundToStep","right","forEach","step","handleDrag","e","type","changedTouches","newValue","newRoundedValue","newValues","slice","handleKeyDown","i","keyCode","sortedValues","handlePress","handleRelease","document","removeEventListener","addEventListener","useMemo","push","map","getTickProps","key","style","rest","position","transform","segments","getSegmentProps","handles","active","getHandleProps","innerRef","onKeyDown","onMouseDown","onTouchStart","persist","role","top","zIndex","getTrackProps","el","userSelect"],"mappings":"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"}