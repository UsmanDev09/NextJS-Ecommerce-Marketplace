import e from"react";function n(){return(n=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function t(e,n){if(null==e)return{};var t,o,r={},u=Object.keys(e);for(o=0;o<u.length;o++)t=u[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}var o=function(e){return[].concat(e).sort((function(e,n){return Number(e)-Number(n)}))},r={getPercentageForValue:function(e,n,t){return Math.max(0,Math.min(100,(e-n)/(t-n)*100))},getValueForClientX:function(e,n,t,o){return(o-t)*((e-n.left)/n.width)+t}};function u(u){var i,a,c=u.interpolator,s=void 0===c?r:c,l=u.tickSize,v=void 0===l?10:l,f=u.values,d=u.min,m=u.max,p=u.ticks,h=u.steps,g=u.onChange,y=u.onDrag,k=u.stepSize,b=e.useState(null),C=b[0],w=b[1],E=e.useState(),x=E[0],D=E[1],M=(i={activeHandleIndex:C,onChange:g,onDrag:y,values:f,tempValues:x},(a=e.useRef(i)).current=i,e.useCallback((function(){return a.current}),[])),S=e.useRef(),L=e.useCallback((function(e){var n,t,o=(n=S.current,t=n.getBoundingClientRect(),{left:Math.ceil(t.left),width:Math.ceil(t.width)});return s.getValueForClientX(e,o,d,m)}),[s,m,d]),O=e.useCallback((function(e,n){if(h){var t=h.indexOf(e)+n;return t>=0&&t<h.length?h[t]:e}if("production"!==process.env.NODE_ENV&&void 0===k)throw new Error("Warning: The option `stepSize` is expected in `useRanger`, but its value is `undefined`");var o=e+k*n;return o>=d&&o<=m?o:e}),[m,d,k,h]),T=e.useCallback((function(e){var n=d,t=m;if(h)h.forEach((function(o){o<=e&&o>n&&(n=o),o>=e&&o<t&&(t=o)}));else{if("production"!==process.env.NODE_ENV&&void 0===k)throw new Error("Warning: The option `stepSize` is expected in `useRanger`, but its value is `undefined`");for(;n<e&&n+k<e;)n+=k;t=Math.min(n+k,m)}return e-n<t-e?n:t}),[m,d,k,h]),V=e.useCallback((function(e){var n=M(),t=n.activeHandleIndex,o=n.onDrag,r="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,u=L(r),i=T(u),a=[].concat(f.slice(0,t),[i],f.slice(t+1));o?o(a):D(a)}),[M,L,T,f]),P=e.useCallback((function(e,n){var t=M(),r=t.values,u=t.onChange,i=void 0===u?function(){}:u;if(37===e.keyCode||39===e.keyCode){w(n);var a=37===e.keyCode?-1:1,c=O(r[n],a),s=[].concat(r.slice(0,n),[c],r.slice(n+1));i(o(s))}}),[M,O]),R=e.useCallback((function(e,n){w(n);var t=function e(n){var t=M(),r=t.tempValues,u=t.values,i=t.onChange,a=void 0===i?function(){}:i,c=t.onDrag,s=void 0===c?function(){}:c;document.removeEventListener("mousemove",V),document.removeEventListener("touchmove",V),document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e);var l=o(r||u);a(l),s(l),w(null),D()};document.addEventListener("mousemove",V),document.addEventListener("touchmove",V),document.addEventListener("mouseup",t),document.addEventListener("touchend",t)}),[M,V]),N=e.useCallback((function(e){return s.getPercentageForValue(e,d,m)}),[s,m,d]),z=e.useMemo((function(){var e=p||h;if(!e){for(e=[d];e[e.length-1]<m-v;)e.push(e[e.length-1]+v);e.push(m)}return e.map((function(e,o){return{value:e,getTickProps:function(r){var u=void 0===r?{}:r,i=u.key,a=void 0===i?o:i,c=u.style,s=void 0===c?{}:c,l=t(u,["key","style"]);return n({key:a,style:n({position:"absolute",width:0,left:N(e)+"%",transform:"translateX(-50%)"},s)},l)}}}))}),[p,N,m,d,h,v]),X=e.useMemo((function(){var e=o(x||f);return[].concat(e,[m]).map((function(o,r){return{value:o,getSegmentProps:function(u){var i=void 0===u?{}:u,a=i.key,c=void 0===a?r:a,s=i.style,l=void 0===s?{}:s,v=t(i,["key","style"]),f=N(e[r-1]?e[r-1]:d);return n({key:c,style:n({position:"absolute",left:f+"%",width:N(o)-f+"%"},l)},v)}}}))}),[N,m,d,x,f]),F=e.useMemo((function(){return(x||f).map((function(e,o){return{value:e,active:o===C,getHandleProps:function(r){var u=void 0===r?{}:r,i=u.key,a=void 0===i?o:i,c=(u.ref,u.innerRef,u.onKeyDown),s=u.onMouseDown,l=u.onTouchStart,v=u.style,f=void 0===v?{}:v,p=t(u,["key","ref","innerRef","onKeyDown","onMouseDown","onTouchStart","style"]);return n({key:a,onKeyDown:function(e){e.persist(),P(e,o),c&&c(e)},onMouseDown:function(e){e.persist(),R(e,o),s&&s(e)},onTouchStart:function(e){e.persist(),R(e,o),l&&l(e)},role:"slider","aria-valuemin":d,"aria-valuemax":m,"aria-valuenow":e,style:n({position:"absolute",top:"50%",left:N(e)+"%",zIndex:o===C?"1":"0",transform:"translate(-50%, -50%)"},f)},p)}}}))}),[C,N,P,R,d,m,x,f]);return{activeHandleIndex:C,getTrackProps:function(e){var o=void 0===e?{}:e,r=o.style,u=void 0===r?{}:r,i=o.ref,a=t(o,["style","ref"]);return n({ref:function(e){S.current=e,i&&("function"==typeof i?i(e):i.current=e)},style:n({position:"relative",userSelect:"none"},u)},a)},ticks:z,segments:X,handles:F}}export{u as useRanger};
//# sourceMappingURL=react-ranger.min.mjs.map
